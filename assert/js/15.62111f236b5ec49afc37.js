webpackJsonp([15],{"04x0":function(e,t,n){"use strict";function a(e){n("6Xof")}Object.defineProperty(t,"__esModule",{value:!0});var r=n("bMVl"),i=n("Pj3q"),l=n("VU/8"),s=a,o=l(r.a,i.a,!1,s,null,null);t.default=o.exports},"6Xof":function(e,t,n){var a=n("EUzk");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("rjj0")("a1732adc",a,!0,{})},EUzk:function(e,t,n){t=e.exports=n("FZ+f")(!0),t.push([e.i,"\n.page {\r\n  text-align: center;\n}\n.updateIntegral {\r\n  width: 400px;\r\n  margin: 2px auto;\n}\n.updateIntegral .el-input {\r\n  width: 100px;\n}\n.el-drawer .el-drawer__body {\r\n  overflow: scroll;\n}\n.integral {\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-box-pack: center;\r\n      -ms-flex-pack: center;\r\n          justify-content: center;\r\n  -webkit-box-orient: horizontal;\r\n  -webkit-box-direction: normal;\r\n      -ms-flex-flow: row wrap;\r\n          flex-flow: row wrap;\r\n  margin-bottom: 15px;\n}\n.integral .name {\r\n  width: 400px;\r\n  font-size: 18px;\r\n  text-align: center;\n}\n.integral .img {\r\n  max-width: 100%;\r\n  max-height: 100%;\n}\n.integral span {\r\n  font-size: 0;\r\n\r\n  width: 400px;\r\n\r\n  height: 250px;\n}\n.header {\r\n  margin-bottom: 6px;\n}\r\n","",{version:3,sources:["C:/Users/14296/Desktop/qiantu_web/src/pages/emp/integral.vue"],names:[],mappings:";AACA;EACE,mBAAmB;CACpB;AACD;EACE,aAAa;EACb,iBAAiB;CAClB;AACD;EACE,aAAa;CACd;AACD;EACE,iBAAiB;CAClB;AACD;EACE,qBAAqB;EACrB,qBAAqB;EACrB,cAAc;EACd,yBAAyB;MACrB,sBAAsB;UAClB,wBAAwB;EAChC,+BAA+B;EAC/B,8BAA8B;MAC1B,wBAAwB;UACpB,oBAAoB;EAC5B,oBAAoB;CACrB;AACD;EACE,aAAa;EACb,gBAAgB;EAChB,mBAAmB;CACpB;AACD;EACE,gBAAgB;EAChB,iBAAiB;CAClB;AACD;EACE,aAAa;;EAEb,aAAa;;EAEb,cAAc;CACf;AACD;EACE,mBAAmB;CACpB",file:"integral.vue",sourcesContent:["\n.page {\r\n  text-align: center;\n}\n.updateIntegral {\r\n  width: 400px;\r\n  margin: 2px auto;\n}\n.updateIntegral .el-input {\r\n  width: 100px;\n}\n.el-drawer .el-drawer__body {\r\n  overflow: scroll;\n}\n.integral {\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-box-pack: center;\r\n      -ms-flex-pack: center;\r\n          justify-content: center;\r\n  -webkit-box-orient: horizontal;\r\n  -webkit-box-direction: normal;\r\n      -ms-flex-flow: row wrap;\r\n          flex-flow: row wrap;\r\n  margin-bottom: 15px;\n}\n.integral .name {\r\n  width: 400px;\r\n  font-size: 18px;\r\n  text-align: center;\n}\n.integral .img {\r\n  max-width: 100%;\r\n  max-height: 100%;\n}\n.integral span {\r\n  font-size: 0;\r\n\r\n  width: 400px;\r\n\r\n  height: 250px;\n}\n.header {\r\n  margin-bottom: 6px;\n}\r\n"],sourceRoot:""}])},Pj3q:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-row",[n("el-col",{attrs:{span:24}},[n("el-card",[n("div",{attrs:{slot:"header"},slot:"header"},[e._v("信用分管理")]),e._v(" "),n("div",{staticClass:"header"},[n("span",[e._v("按部门搜索")]),e._v(" "),n("el-select",{attrs:{placeholder:"请选择部门"},model:{value:e.departmentId,callback:function(t){e.departmentId=t},expression:"departmentId"}},e._l(e.departments,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.getEmpIntByDid}},[e._v("搜索")])],1),e._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",height:"610px"}},[n("el-table-column",{attrs:{label:"姓名",prop:"nickName",width:"100"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"上次修改的信用分",prop:"lastAddIntegral",width:"180"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"信用分",prop:"integral"}}),e._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"small",type:"text"},on:{click:function(n){return e.getDetail(t.row)}}},[e._v("查看详情")])]}}])})],1),e._v(" "),n("div",{staticClass:"page"},[n("el-pagination",{attrs:{"current-page":e.currentpage,total:e.total,background:"",layout:"prev, pager, next"},on:{"current-change":e.changedPage}}),e._v(" "),n("el-drawer",{attrs:{visible:e.drawer,title:"信用分详情"},on:{"update:visible":function(t){e.drawer=t}}},[e._l(e.imgs,function(t){return n("div",{key:t.name,staticClass:"demo-image__placeholder"},[n("div",{staticClass:"block integral"},[n("div",{staticClass:"name"},[e._v(e._s(t.name))]),e._v(" "),n("span",[t.pic01?n("el-image",{staticClass:"img",attrs:{src:t.pic01}}):e._e()],1),e._v(" "),""==!t.pic02?n("span",[n("el-image",{staticClass:"img",attrs:{src:t.pic02}})],1):e._e()])])}),e._v(" "),n("div",{staticClass:"updateIntegral"},[e._v("\n              当前信用分 "+e._s(e.integral)+"分 ；修改为\n              "),n("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.newIntegral,callback:function(t){e.newIntegral=t},expression:"newIntegral"}}),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.changeIntegral}},[e._v("确认修改")])],1)],2)],1)],1)],1)],1)],1)},r=[],i={render:a,staticRenderFns:r};t.a=i},bMVl:function(e,t,n){"use strict";t.a={data:function(){return{tableData:[],url:"",departmentId:"",drawer:!1,integral:"",imgs:[],pagesize:10,currentpage:1,total:null,newIntegral:"",id:"",departments:[]}},created:function(){this.getInfo(),this.getDepartments()},methods:{getEmpIntByDid:function(){var e=this;this.getRequest(e.url+"/integral?did="+e.departmentId).then(function(t){e.currentpage=t.data.currentpage,e.tableData=t.data.records,e.total=t.data.total})},getDepartments:function(){var e=this,t=this;this.getRequest(t.url+"/department/all").then(function(t){e.departments=t.data}).catch(function(){t.$message({showClose:!0,message:"获取部门列表失败",type:"error"})})},changeIntegral:function(){var e=this;if(""===this.newIntegral)return void e.$message({showClose:!0,message:"请输入信用分",type:"error"});console.log(this.id),this.getRequest(this.url+"/integral/update?userId="+this.id+"&integral="+this.newIntegral).then(function(t){0===t.data.code?(e.$message({showClose:!0,message:"修改成功",type:"success"}),e.drawer=!1,e.getInfo(),e.newIntegral=""):e.$message({showClose:!0,message:"修改失败",type:"error"})})},getDetail:function(e){var t=this;t.drawer=!0,t.integral=e.integral,t.id=e.id,console.log(e.id),t.getRequest(t.url+"/certificate/img?userId="+t.id).then(function(e){t.imgs=e.data.data})},getInfo:function(){var e=this;this.getRequest(e.url+"/integral").then(function(t){console.log(t),e.currentpage=t.data.current,e.tableData=t.data.records,e.total=t.data.total})},changedPage:function(e){var t=this,n=t.url+"/integral?pageNum="+e;this.departmentId&&(n+="&did="+t.departmentId),this.getRequest(n).then(function(n){t.currentpage=e,t.tableData=n.data.records,t.total=n.data.total})}}}}});
//# sourceMappingURL=15.62111f236b5ec49afc37.js.map