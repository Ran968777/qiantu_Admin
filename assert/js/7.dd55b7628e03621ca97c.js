webpackJsonp([7],{"+eY2":function(e,t,a){t=e.exports=a("FZ+f")(!0),t.push([e.i,"\n.basic .el-table .warning-row{background-color:oldlace\n}\n.basic .recommend-tag{display:inline-block;margin:4px 0;margin-right:4px\n}\n.basic .recommend-tag:last-child{margin-right:0\n}\n.header{margin-bottom:6px;position:relative\n}\n.page{text-align:center;margin-top:10px\n}\n.header .right{display:inline-block;height:50px;width:400px\n}\n.header .right .el-input{width:60%\n}\n.header .left{display:inline-block;position:absolute;right:20px\n}\n","",{version:3,sources:["C:/Users/14296/Desktop/qiantu_web/src/pages/emp/basic.vue"],names:[],mappings:";AACA,8BAA8B,wBAAwB;CACrD;AACD,sBAAsB,qBAAqB,aAAa,gBAAgB;CACvE;AACD,iCAAiC,cAAc;CAC9C;AACD,QAAQ,kBAAkB,iBAAiB;CAC1C;AACD,MAAM,kBAAkB,eAAe;CACtC;AACD,eAAe,qBAAqB,YAAY,WAAW;CAC1D;AACD,yBAAyB,SAAS;CACjC;AACD,cAAc,qBAAqB,kBAAkB,UAAU;CAC9D",file:"basic.vue",sourcesContent:["\n.basic .el-table .warning-row{background-color:oldlace\n}\n.basic .recommend-tag{display:inline-block;margin:4px 0;margin-right:4px\n}\n.basic .recommend-tag:last-child{margin-right:0\n}\n.header{margin-bottom:6px;position:relative\n}\n.page{text-align:center;margin-top:10px\n}\n.header .right{display:inline-block;height:50px;width:400px\n}\n.header .right .el-input{width:60%\n}\n.header .left{display:inline-block;position:absolute;right:20px\n}\n"],sourceRoot:""}])},"+ljE":function(e,t,a){var r=a("+eY2");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("b54d78e2",r,!0,{})},"Fd/v":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"basic"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[e._v("员工基本信息")]),e._v(" "),a("div",{staticClass:"header"},[a("div",{staticClass:"right"},[a("el-input",{attrs:{clearable:"",placeholder:"请输入要搜索的人员名字",size:"small"},model:{value:e.queryName,callback:function(t){e.queryName=t},expression:"queryName"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.queryByName}},[e._v("搜索")])],1),e._v(" "),a("div",{staticClass:"left"},[a("span",[e._v("按部门搜索")]),e._v(" "),a("el-select",{attrs:{filterable:"",placeholder:"请选择部门"},model:{value:e.departmentId,callback:function(t){e.departmentId=t},expression:"departmentId"}},e._l(e.departments,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.getEmpByDid}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addflag=!0}}},[e._v("添加新员工")])],1)]),e._v(" "),a("el-dialog",{attrs:{"modal-append-to-body":!1,visible:e.addflag,title:"添加员工"},on:{"update:visible":function(t){e.addflag=t}}},[a("el-form",{ref:"newWorker",attrs:{model:e.newForm,rules:e.addRules}},[a("el-form-item",{attrs:{label:"姓名",prop:"nickName"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.newForm.nickName,callback:function(t){e.$set(e.newForm,"nickName",t)},expression:"newForm.nickName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机",prop:"mobile"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.newForm.mobile,callback:function(t){e.$set(e.newForm,"mobile",t)},expression:"newForm.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别",prop:"gender"}},[a("el-radio",{attrs:{label:1},model:{value:e.newForm.gender,callback:function(t){e.$set(e.newForm,"gender",t)},expression:"newForm.gender"}},[e._v("男")]),e._v(" "),a("el-radio",{attrs:{label:2},model:{value:e.newForm.gender,callback:function(t){e.$set(e.newForm,"gender",t)},expression:"newForm.gender"}},[e._v("女")])],1),e._v(" "),a("el-form-item",{attrs:{label:"部门",prop:"departmentId"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.newForm.departmentId,callback:function(t){e.$set(e.newForm,"departmentId",t)},expression:"newForm.departmentId"}},e._l(e.departments,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"职位",prop:"position"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.newForm.position,callback:function(t){e.$set(e.newForm,"position",t)},expression:"newForm.position"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addflag=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitNewWorker("newWorker")}}},[e._v("确定添加")])],1)],1),e._v(" "),a("div",{staticClass:"table-wrapper"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tableData,"row-class-name":e.addRowClass,border:"","element-loading-text":"加载数据中"}},[a("el-table-column",{attrs:{label:"姓名",prop:"nickName",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"手机号",prop:"mobile",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.computeGender,label:"性别"}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.fmtDepartment,label:"部门"}}),e._v(" "),a("el-table-column",{attrs:{label:"职位",prop:"position"}}),e._v(" "),a("el-table-column",{attrs:{label:"信用分",prop:"integral"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",prop:"state"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:1===t.row.state?"success":"danger","disable-transitions":""}},[e._v(e._s(e.getState(t.row.state)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"权限",prop:"power"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.showUpdataDialog(t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{"current-page":e.currentpage,total:e.total,background:"",layout:"prev, pager, next"},on:{"current-change":e.changedPage}}),e._v(" "),a("el-dialog",{attrs:{fit:!1,"modal-append-to-body":!1,visible:e.dialogFormVisible,title:"修改员工信息",width:"30%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"updateWorker",attrs:{model:e.form,rules:e.updateRules}},[a("el-form-item",{attrs:{label:"姓名",prop:"nickName"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.nickName,callback:function(t){e.$set(e.form,"nickName",t)},expression:"form.nickName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机",prop:"mobile"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别",prop:"gender"}},[a("el-radio",{attrs:{label:1},model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[e._v("男")]),e._v(" "),a("el-radio",{attrs:{label:2},model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[e._v("女")])],1),e._v(" "),a("el-form-item",{attrs:{fixed:"left",label:"部门",prop:"departmentId"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.form.departmentId,callback:function(t){e.$set(e.form,"departmentId",t)},expression:"form.departmentId"}},e._l(e.departments,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"职位",prop:"position"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.position,callback:function(t){e.$set(e.form,"position",t)},expression:"form.position"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"state"}},[a("el-radio",{attrs:{label:1},model:{value:e.form.state,callback:function(t){e.$set(e.form,"state",t)},expression:"form.state"}},[e._v("正常")]),e._v(" "),a("el-radio",{attrs:{label:2},model:{value:e.form.state,callback:function(t){e.$set(e.form,"state",t)},expression:"form.state"}},[e._v("禁用")])],1),e._v(" "),a("el-form-item",{attrs:{label:"信用分"}},[a("el-popover",{attrs:{content:"信用分请到信用分管理里修改",placement:"top-start",title:"提示",trigger:"hover",width:"200"}},[a("el-input",{attrs:{slot:"reference",disabled:!0,autocomplete:"off"},slot:"reference",model:{value:e.form.integral,callback:function(t){e.$set(e.form,"integral",t)},expression:"form.integral"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateInfo("updateWorker")}}},[e._v("确定更新")])],1)],1)],1)],1)],1)],1)],1)],1)},n=[],l={render:r,staticRenderFns:n};t.a=l},gxUl:function(e,t,a){"use strict";function r(e){a("+ljE")}Object.defineProperty(t,"__esModule",{value:!0});var n=a("izmw"),l=a("Fd/v"),o=a("VU/8"),i=r,s=o(n.a,l.a,!1,i,null,null);t.default=s.exports},izmw:function(e,t,a){"use strict";var r=a("oAV5");t.a={created:function(){this.getDepartments(),this.getTableData()},data:function(){return{form:{nickName:"",mobile:"",gender:"",departmentId:"",position:"",state:""},tableData:null,Address:this.tabel,loading:!1,pagesize:10,currentpage:1,total:null,options:null,value:"",label:"",departmentId:null,url:"",newForm:{nickName:"",mobile:"",gender:"",departmentId:"",position:""},addflag:!1,dialogFormVisible:!1,departments:[],queryName:"",addRules:{nickName:[{required:!0,message:"必填:姓名",trigger:"blur"}],gender:[{required:!0,message:"必填:性别",trigger:"blur"}],mobile:[{pattern:/^[1]([3-9])[0-9]{9}$/,required:!0,message:"请检查手机号码",trigger:"blur"}],departmentId:[{required:!0,message:"必选:部门",trigger:"blur"}],position:[{required:!0,message:"必填:职位信息",trigger:"blur"}]},updateRules:{nickName:[{required:!0,message:"必填:姓名",trigger:"blur"}],gender:[{required:!0,message:"必填:性别",trigger:"blur"}],mobile:[{pattern:/^[1]([3-9])[0-9]{9}$/,required:!0,message:"请检查手机号码",trigger:"blur"}],departmentId:[{required:!0,message:"必选:部门",trigger:"blur"}],position:[{required:!0,message:"必填:职位信息",trigger:"blur"}],state:[{required:!0,message:"必填:状态",trigger:"blur"}]}}},methods:{queryByName:function(){var e=this;e.currentpage=1,""===this.queryName?this.getTableData():this.getRequest("/empByKey?nickName="+e.queryName+"&pageNum="+e.currentpage).then(function(t){e.currentpage=t.data.current,e.tableData=t.data.records,e.total=t.data.total})},getState:function(e){return 1===e?"正常":"禁用"},updateInfo:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var a=t;t.postRequest(t.url+"/updateEmp",t.form).then(function(e){0===e.data.code?(a.$message({showClose:!0,message:"修改成功",type:"success"}),a.dialogFormVisible=!1,a.getTableData()):a.$message({showClose:!0,message:"修改失败",type:"error"})})})},showUpdataDialog:function(e){this.dialogFormVisible=!0,this.form=e},submitNewWorker:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var a=t;t.postRequest(t.url+"/addEmp",t.newForm).then(function(e){0===e.data.code?(a.$message({showClose:!0,message:"添加成功",type:"success"}),a.addflag=!1,a.newForm={},a.getTableData()):a.$message({showClose:!0,message:"添加失败",type:"error"})})})},fmtDepartment:function(e){if(this.departments instanceof Array){var t=this.departments.filter(function(t){if(e.departmentId===t.value)return t});return 0!==t.length?t[0].label:"暂无"}},computeGender:function(e){return["未知","男","女"][e.gender]},changedPage:function(e){var t=this,a="/emp?pageNum="+e;this.departmentId&&(a+="&did="+t.departmentId),this.getRequest(a).then(function(e){t.currentpage=e.data.current,t.tableData=e.data.records,t.total=e.data.total})},getTableData:function(){var e=this;this.getRequest("/emp?pageNum="+e.currentpage).then(function(t){e.currentpage=t.data.current,e.tableData=t.data.records,e.total=t.data.total})},getDepartments:function(){var e=this,t=this;this.getRequest("/department/all").then(function(t){e.departments=t.data}).catch(function(){t.$message({showClose:!0,message:"获取部门列表失败",type:"error"})})},getEmpByDid:function(){var e=this;this.getRequest("/emp?did="+e.departmentId).then(function(t){e.currentpage=t.data.currentpage,e.tableData=t.data.records,e.total=t.data.total})},show:function(e){},handleSizeChange:function(e){this.pagesize=e,this.getTableData()},handleCurrentChange:function(e){this.currentpage=e,this.getTableData()},addRowClass:function(e){var t=e.row;e.rowIndex;if(1===t.rateType)return"warning-row"}},filters:{rateTypeToText:function(e){return 0===e?"满意":"不满意"},formatDate:function(e){var t=new Date(e);return Object(r.a)(t,"yyyy-MM-dd hh:mm:ss")}},components:{}}},oAV5:function(e,t,a){"use strict";function r(e,t){/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));var a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(var r in a)if(new RegExp("("+r+")").test(t)){var l=a[r]+"";t=t.replace(RegExp.$1,1===RegExp.$1.length?l:n(l))}return t}function n(e){return("00"+e).substr(e.length)}t.a=r}});
//# sourceMappingURL=7.dd55b7628e03621ca97c.js.map